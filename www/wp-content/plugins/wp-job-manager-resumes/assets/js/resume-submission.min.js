jQuery(document).ready(function(e){function a(){e("fieldset.import-from-linkedin").remove();var a={formattedName:"",headline:"",summary:!1,pictureUrl:!1,emailAddress:"",location:{name:""},dateOfBirth:"",threeCurrentPositions:{values:[]},threePastPositions:{values:[]},positions:{values:[]},educations:{values:[]},skills:{values:[]},memberUrlResources:{values:[]}};IN.API.Profile("me").fields(["formattedName","headline","summary","pictureUrl","emailAddress","location:(name)","dateOfBirth","firstName","lastName","publicProfileUrl","specialties","industry","positions:(title,company,summary,startDate,endDate,isCurrent)","threeCurrentPositions:(title,company,summary,startDate,endDate,isCurrent)","threePastPositions:(title,company,summary,startDate,endDate,isCurrent)","educations:(schoolName,degree,fieldOfStudy,startDate,endDate,activities,notes)","skills:(skill)","memberUrlResources","associations","interests"]).result(function(i){var t=jQuery.extend(!0,{},a,i.values[0]);if($form=e("#submit-resume-form"),$form.find('input[name="candidate_name"]').val(t.formattedName),$form.find('input[name="candidate_email"]').val(t.emailAddress),$form.find('input[name="candidate_title"]').val(t.headline),$form.find('input[name="candidate_location"]').val(t.location.name),t.summary&&($form.find('textarea[name="resume_content"]').val(t.summary),"object"===e.type(tinymce)&&tinymce.get("resume_content").setContent(t.summary)),e(t.skills.values).each(function(e,a){$form.find('input[name="resume_skills"]').val()?$form.find('input[name="resume_skills"]').val($form.find('input[name="resume_skills"]').val()+", "+a.skill.name):$form.find('input[name="resume_skills"]').val(a.skill.name)}),e(t.memberUrlResources.values).each(function(a,i){i.name&&i.url&&(e(".fieldset-links").find(".resume-manager-add-row").click(),e(".fieldset-links").find('input[name^="link_name"]').last().val(i.name),e(".fieldset-links").find('input[name^="link_url"]').last().val(i.url))}),e(t.educations.values).each(function(a,i){var t=[],n=[];i.fieldOfStudy&&t.push(i.fieldOfStudy),i.degree&&t.push(i.degree),i.startDate&&n.push(i.startDate.year),i.endDate&&n.push(i.endDate.year),e(".fieldset-candidate_education").find(".resume-manager-add-row").click(),e(".fieldset-candidate_education").find('input[name^="candidate_education_location"]').last().val(i.schoolName),e(".fieldset-candidate_education").find('input[name^="candidate_education_qualification"]').last().val(t.join(", ")),e(".fieldset-candidate_education").find('input[name^="candidate_education_date"]').last().val(n.join("-")),e(".fieldset-candidate_education").find('textarea[name^="candidate_education_notes"]').last().val(i.notes)}),e(t.positions.values).each(function(a,i){var t=[];i.startDate&&t.push(i.startDate.year),i.endDate&&t.push(i.endDate.year),e(".fieldset-candidate_experience").find(".resume-manager-add-row").click(),e(".fieldset-candidate_experience").find('input[name^="candidate_experience_employer"]').last().val(i.company.name),e(".fieldset-candidate_experience").find('input[name^="candidate_experience_job_title"]').last().val(i.title),e(".fieldset-candidate_experience").find('input[name^="candidate_experience_date"]').last().val(t.join("-")),e(".fieldset-candidate_experience").find('textarea[name^="candidate_experience_notes"]').last().val(i.summary)}),t.pictureUrl){var n=e(".fieldset-candidate_photo .field");if(n)var r=n.find(':input[type="file"]').attr("name");e(".fieldset-candidate_photo .field").prepend('<div class="job-manager-uploaded-files"><div class="job-manager-uploaded-file"><span class="job-manager-uploaded-file-preview"><img src="'+t.pictureUrl+'" /> <a class="job-manager-remove-uploaded-file" href="#">['+resume_manager_resume_submission.i18n_remove+']</a></span><input type="hidden" class="input-text" name="current_'+r+'" value="'+t.pictureUrl+'" /></div></div>')}$form.trigger("linkedin_import",t)})}e(".resume-manager-add-row").click(function(){var a=0;e(this).closest(".field").find("input.repeated-row-index").each(function(){parseInt(e(this).val())>a&&(a=parseInt(e(this).val()))});var i=e(this).data("row").replace(/%%repeated-row-index%%/g,a+1);return e(this).before(i),!1}),e("#submit-resume-form").on("click",".resume-manager-remove-row",function(){return confirm(resume_manager_resume_submission.i18n_confirm_remove)&&e(this).closest("div.resume-manager-data-row").remove(),!1}),e("#submit-resume-form").on("click",".job-manager-remove-uploaded-file",function(){return e(this).closest(".job-manager-uploaded-file").remove(),!1}),e(".fieldset-candidate_experience .field, .fieldset-candidate_education .field, .fieldset-links .field").sortable({items:".resume-manager-data-row",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65});var i=!1;e("form#resume_preview").size()&&(i=!0),e("form#submit-resume-form").on("change","input",function(){i=!0}),e("form#submit-resume-form, form#resume_preview").submit(function(){return i=!1,!0}),e(window).bind("beforeunload",function(e){if(i)return resume_manager_resume_submission.i18n_navigate}),e("input.import-from-linkedin").click(function(){return IN.User.isAuthorized()?a():(IN.Event.on(IN,"auth",a),IN.UI.Authorize().place()),!1})});